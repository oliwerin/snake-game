var $=Object.defineProperty,O=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&w(e,n,t[n]);if(x)for(var n of x(t))P.call(t,n)&&w(e,n,t[n]);return e},R=(e,t)=>O(e,U(t));import{j as g,c as j,r as f,u as B,R as H,a as K}from"./vendor.56868ba6.js";const Y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};Y();const d=g.exports.jsx,p=g.exports.jsxs,X=g.exports.Fragment;function E({label:e,onClick:t}){return d("button",{className:"button",type:"button",onClick:()=>{t()},children:e})}function q({hasGameStarted:e,isGamePaused:t,setHasGameStarted:n,setIsGamePaused:s}){return p(X,{children:[!e&&d(E,{label:"PLAY",onClick:()=>{n(!0)}}),e&&d(E,{label:t?"RESUME":"PAUSE",onClick:()=>{s(!t)}})]})}var a;(function(e){e.Up="up",e.Right="right",e.Down="down",e.Left="left"})(a||(a={}));const Z=400,h=20,k={x:10,y:10},N=a.Right;function z({isGameStopped:e,snakePosition:t,foodPosition:n}){return p("div",{className:j("gameArea",{gameStopped:e}),children:[[...Array(h).keys()].map((s,r)=>d(f.exports.Fragment,{children:[...Array(h).keys()].map((o,i)=>t.find(c=>c.x===r&&c.y===i)===void 0?d("div",{style:{top:`${i}rem`,left:`${r}rem`},className:"boardSegment"},`id-${r}-${i}`):null)},`id-${r}`)),n&&d("div",{style:{top:`${n.y}rem`,left:`${n.x}rem`},className:"snakeFood"})]})}const J=(e,t)=>t===a.Right?e+1:t===a.Left?e-1:e,Q=(e,t)=>t===a.Up?e+1:t===a.Down?e-1:e,b=()=>Math.floor(Math.random()*(h-1)),V=(e,t)=>e.find(n=>n.x===t)!==void 0,W=(e,t)=>e.find(n=>n.y===t)!==void 0,C=e=>{let t,n;do t=b(),n=b();while(V(e,t)&&W(e,n));return{x:t,y:n}},ee=(e,t)=>{const n=t.find(r=>r.x===e.x&&r.y===e.y)!==void 0,s=e.x===h||e.y===h||e.x===-1||e.y===-1;return n||s},te=(e,t)=>[e,...t.filter((n,s)=>s!==0).map((n,s)=>t[s])];let l=N,u=!1;const G=()=>{l!==a.Up&&!u&&(l=a.Down,u=!0)},I=()=>{l!==a.Down&&!u&&(l=a.Up,u=!0)},L=()=>{l!==a.Left&&!u&&(l=a.Right,u=!0)},_=()=>{l!==a.Right&&!u&&(l=a.Left,u=!0)},D=e=>{switch(e.key){case"ArrowUp":G();break;case"ArrowDown":I();break;case"ArrowRight":L();break;case"ArrowLeft":_();break}},ne=()=>{f.exports.useEffect(()=>(document.addEventListener("keyup",D),()=>{document.removeEventListener("keyup",D)}),[])},re=()=>{const[e,t]=f.exports.useState(!1),[n,s]=f.exports.useState(!1),r=!e||n,[o,i]=f.exports.useState([k]),[c,y]=f.exports.useState(null);ne();const T=B({onSwipedUp:()=>G(),onSwipedDown:()=>I(),onSwipedRight:()=>L(),onSwipedLeft:()=>_()});return f.exports.useEffect(()=>{e&&(i([k]),y(C(o)),l=N)},[e]),f.exports.useEffect(()=>{const S=setInterval(()=>{if(r)return;const[v]=o,m={x:J(v.x,l),y:Q(v.y,l)};if(ee(m,o)){t(!1),clearInterval(S);return}if(m.x===(c==null?void 0:c.x)&&m.y===(c==null?void 0:c.y))i([m,...o]),y(C(o));else{const F=te(m,o);i(F)}u=!1},Z);return()=>{clearInterval(S)}},[o,r]),{hasGameStarted:e,isGamePaused:n,isGameStopped:r,snakePosition:o,foodPosition:c,swipeHandlers:T,setHasGameStarted:t,setIsGamePaused:s}};function oe(){const{hasGameStarted:e,isGamePaused:t,isGameStopped:n,snakePosition:s,foodPosition:r,swipeHandlers:o,setHasGameStarted:i,setIsGamePaused:c}=re();return p("div",R(A({},o),{children:[p("div",{className:"header",children:[p("span",{children:["Score: ",s.length-1]}),d(q,{hasGameStarted:e,isGamePaused:t,setHasGameStarted:i,setIsGamePaused:c})]}),p("div",{className:"gameContainer",children:[n&&d("div",{className:"overlay"}),d(z,{isGameStopped:n,snakePosition:s,foodPosition:r})]}),d("div",{className:"footer",children:"Controls: use \u2190, \u2191, \u2192, \u2193 buttons or swipe gestures to control the snake"})]}))}H.render(d(K.StrictMode,{children:d(oe,{})}),document.getElementById("root"));
