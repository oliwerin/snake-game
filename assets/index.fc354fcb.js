var $=Object.defineProperty,O=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var A=(e,t,n)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,R=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&A(e,n,t[n]);if(w)for(var n of w(t))j.call(t,n)&&A(e,n,t[n]);return e},k=(e,t)=>O(e,U(t));import{j as g,c as H,r as f,u as B,R as K,a as Y}from"./vendor.56868ba6.js";const q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}};q();const c=g.exports.jsx,p=g.exports.jsxs,X=g.exports.Fragment;function E({label:e,onClick:t}){return c("button",{className:"button",type:"button",onClick:()=>{t()},children:e})}function Z({hasGameStarted:e,isGamePaused:t,setHasGameStarted:n,setIsGamePaused:s}){return p(X,{children:[!e&&c(E,{label:"PLAY",onClick:()=>{n(!0)}}),e&&c(E,{label:t?"RESUME":"PAUSE",onClick:()=>{s(!t)}})]})}var a;(function(e){e.Up="up",e.Right="right",e.Down="down",e.Left="left"})(a||(a={}));const z=400,h=20,N={x:10,y:10},b=a.Right,J=(e,t)=>t===a.Right?e+1:t===a.Left?e-1:e,Q=(e,t)=>t===a.Up?e+1:t===a.Down?e-1:e,S=(e,t)=>e.find(n=>n.x===t.x&&n.y===t.y)!==void 0,G=()=>Math.floor(Math.random()*(h-1)),I=e=>{let t,n;do t=G(),n=G();while(S(e,{x:t,y:n}));return{x:t,y:n}},V=(e,t)=>{const n=S(t,e),s=e.x===h||e.y===h||e.x===-1||e.y===-1;return n||s},W=(e,t)=>[e,...t.filter((n,s)=>s!==0).map((n,s)=>t[s])];function ee({isGameStopped:e,snakePosition:t,foodPosition:n}){return p("div",{className:H("gameArea",{gameStopped:e}),children:[[...Array(h).keys()].map((s,r)=>c(f.exports.Fragment,{children:[...Array(h).keys()].map((o,i)=>S(t,{x:r,y:i})?null:c("div",{style:{top:`${i}rem`,left:`${r}rem`},className:"boardSegment"},`id-${r}-${i}`))},`id-${r}`)),n&&c("div",{style:{top:`${n.y}rem`,left:`${n.x}rem`},className:"snakeFood"})]})}let l=b,u=!1;const C=()=>{l!==a.Up&&!u&&(l=a.Down,u=!0)},L=()=>{l!==a.Down&&!u&&(l=a.Up,u=!0)},_=()=>{l!==a.Left&&!u&&(l=a.Right,u=!0)},D=()=>{l!==a.Right&&!u&&(l=a.Left,u=!0)},T=e=>{switch(e.key){case"ArrowUp":C();break;case"ArrowDown":L();break;case"ArrowRight":_();break;case"ArrowLeft":D();break}},te=()=>{f.exports.useEffect(()=>(document.addEventListener("keyup",T),()=>{document.removeEventListener("keyup",T)}),[])},ne=()=>{const[e,t]=f.exports.useState(!1),[n,s]=f.exports.useState(!1),r=!e||n,[o,i]=f.exports.useState([N]),[d,y]=f.exports.useState(null);te();const F=B({onSwipedUp:()=>C(),onSwipedDown:()=>L(),onSwipedRight:()=>_(),onSwipedLeft:()=>D()});return f.exports.useEffect(()=>{e&&(i([N]),y(I(o)),l=b)},[e]),f.exports.useEffect(()=>{const v=setInterval(()=>{if(r)return;const[x]=o,m={x:J(x.x,l),y:Q(x.y,l)};if(V(m,o)){t(!1),clearInterval(v);return}if(m.x===(d==null?void 0:d.x)&&m.y===(d==null?void 0:d.y))i([m,...o]),y(I(o));else{const P=W(m,o);i(P)}u=!1},z);return()=>{clearInterval(v)}},[o,r]),{hasGameStarted:e,isGamePaused:n,isGameStopped:r,snakePosition:o,foodPosition:d,swipeHandlers:F,setHasGameStarted:t,setIsGamePaused:s}};function re(){const{hasGameStarted:e,isGamePaused:t,isGameStopped:n,snakePosition:s,foodPosition:r,swipeHandlers:o,setHasGameStarted:i,setIsGamePaused:d}=ne();return p("div",k(R({},o),{children:[p("div",{className:"header",children:[p("span",{children:["Score: ",s.length-1]}),c(Z,{hasGameStarted:e,isGamePaused:t,setHasGameStarted:i,setIsGamePaused:d})]}),p("div",{className:"gameContainer",children:[n&&c("div",{className:"overlay"}),c(ee,{isGameStopped:n,snakePosition:s,foodPosition:r})]}),c("div",{className:"footer",children:"Controls: use \u2190, \u2191, \u2192, \u2193 buttons or swipe gestures to control the snake"})]}))}K.render(c(Y.StrictMode,{children:c(re,{})}),document.getElementById("root"));
